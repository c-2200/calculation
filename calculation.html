<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <meta name="robots" content="noindex">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>計算練習</title>
  </head>
  <body>
    <style>
      body {
        margin: 0;
        min-height: 100vh;
        display: flex;
        justify-content: center;
        align-items: center;
        background-color: #f2f2f2;
      }
      .questionContainer {
        width: 420px;
        padding: 32px;
        background-color: #ffffff;
        text-align: center;
      }
      .questionStatus {
        font-size: 16px;
        color: #666;
        margin-bottom: 20px;
      }
      .questionText {
        font-size: 40px;
        font-weight: bold;
        margin: 20px 0 30px;
      }
      .answer {
        width: 200px;
        font-size: 24px;
        padding: 8px;
        text-align: center;
      }
      .answerbox {
        width: 140px;
        height: 50px;
        border: 3px solid #000;
      }
      .keyboard {
        display: grid;
        grid-template-columns: 105px 105px 105px 105px;
        grid-templaye-rows: 40px 40px 40px 40px;
        font-size: 30px;
        border: 1px
        background-color: #ffffff;
      }
      .keybord button {
        width: 105px;
        height: 40px;
      }
    </style>
    <div class="questionContainer">
      <div class="questionStatus" id="questionStatus">aaa</div>
      <div class="questionText" id="questionText">hisafdu</div>
      <div class="answer">
        <div>＝</div>
        <div class="answerBox" id="answer"></div>
      </div>
      <div class="keyboard">
        <button id="1">1</button>
        <button id="2">2</button>
        <button id="3">3</button>
        <button id="-">-</button>
        <button id="4">4</button>
        <button id="5">5</button>
        <button id="6">6</button>
        <button id="/">/</button>
        <button id="">7</button>
        <button id="8">8</button>
        <button id="9">9</button>
        <div></div>
        <button id="0">0</button>
      </div>
    </div>
    <script>
      const info = JSON.parse(localStorage.getItem("calcSettings"));
      let operator = info.operator;
      const digit1 = Number(info.digit1);
      const digit2 = Number(info.digit2);
      const question = Number(info.question);
      for (let i = 1; i < question; i++) {
        document.getElementById("questionStatus").textContent = `第 ${i}/${question} 問目`
        const max1 = 10 ** (digit1 - 1);
        const min1 = 10 ** digit1 - 1;
        const number1 = Math.floor(Math.random() * (max1 - min1 + 1)) + min1;
        const max2 = 10 ** (digit2 - 1);
        const min2 = 10 ** digit2 - 1;
        const number2 = Math.floor(Math.random() * (max2 - min2 + 1)) + min2;
        if (operator == "mix") {
          const items = ["+", "-", "*", "/"];
          operator = items[Math.floor(Math.random() * items.length)];
        }
        if (operator == "+") {
          answer = String(number1 + number2);
        } else if (operator == "-") {
          answer = String(number1 - number2);
        } else if (operator == "*") {
          answer = String(number1 * number2);
        } else if (operator == "/") {
          function division(numerator, denominator) {
            const gcd = (a, b) => (b === 0 ? a : gcd(b, a % b));
            const g = gcd(numerator, denominator);
            return `${numerator / g}/${denominator / g}`;
          }
          if (number1 % number2 !== 0) {
            answer = division(number1, number2);
          } else {
            answer = String(number1 / number2);
          }
        }
        
      }
    </script>
  </body>
